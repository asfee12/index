<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MY DIARY</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 20px;
    transition: background-image 1s ease-in-out;
    background-size: cover;
    background-position: center;
  }
  h1 {
    text-align: center;
    color: #fff;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
  }
  #mainArea {
    max-width: 1000px;
    margin: 0 auto;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }
  #diary {
    width: 100%;
    height: 200px;
    padding: 15px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
    resize: vertical;
    box-sizing: border-box;
  }
  #actions {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 15px;
    justify-content: center;
  }
  button {
    background-color: #0288d1;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  button:hover {
    background-color: #0277bd;
  }
  #listHalaman {
    margin-top: 25px;
  }
  #listHalaman h3 {
    margin-bottom: 10px;
    color: #006064;
  }
  #listHalaman button {
    margin: 5px;
    padding: 10px 15px;
    font-size: 14px;
    background-color: #0097a7;
  }
  #listHalaman button:hover {
    background-color: #00838f;
  }
  #hasilAssessment {
    display: none;
    margin-top: 30px;
    background-color: #f1f8e9;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }
  #hasilAssessment h2 {
    margin-top: 0;
    color: #33691e;
  }
  #assessmentResultsDiv p {
    margin: 10px 0;
    line-height: 1.5;
  }
  /* Style untuk login */
  #loginContainer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    z-index: 9999;
  }
  #loginContainer h2 {
    color: #fff;
    margin-bottom: 20px;
  }
  #loginContainer input {
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    margin-bottom: 15px;
  }
</style>
</head>
<body>

<!-- Login Container -->
<div id="loginContainer">
  <h2>Masukkan Password untuk Akses</h2>
  <input type="password" id="passwordInput" placeholder="Password" />
  <button onclick="cekPassword()">Masuk</button>
</div>

<!-- Halaman utama disembunyikan sampai login benar -->
<div id="mainContent" style="display:none;">
<h1>MY DIARY</h1>
<div id="mainArea">
  <textarea id="diary" placeholder="Tulis cerita diary kamu di sini..."></textarea>
  <div id="actions">
    <button onclick="simpanHalaman()">Simpan Halaman</button>
    <button onclick="muatHalamanTerakhir()">Muat Halaman Terakhir</button>
    <button onclick="tambahHalaman()">Tambah Halaman Baru</button>
    <button onclick="assessDiary()">Analisis Cerita</button>
    <button onclick="curhatBro()">Curhat Bro</button>
  </div>
  <div id="listHalaman">
    <h3>Daftar Halaman Disimpan:</h3>
    <div id="daftarHalaman"></div>
  </div>
  <div id="hasilAssessment">
    <h2>Hasil Penilaian</h2>
    <div id="assessmentResultsDiv"></div>
  </div>
</div>
</div>

<script>
  // Daftar halaman dan variabel lain
  let daftarHalaman = [];

  // Password proteksi
  const password = "rahasia123"; // Ganti sesuai keinginan kamu

  function cekPassword() {
    const input = document.getElementById('passwordInput').value;
    if (input === password) {
      document.getElementById('loginContainer').style.display = 'none';
      document.getElementById('mainContent').style.display = 'block';
      startBackgroundRotation(); // mulai background otomatis setelah login
    } else {
      alert("Password salah!");
    }
  }

  // Fungsi lain tetap sama seperti sebelumnya
  function simpanHalaman() {
    const isi = document.getElementById('diary').value.trim();
    if (isi === "") {
      alert("Isi diary kosong, tidak bisa disimpan.");
      return;
    }
    const timestamp = new Date().toISOString();
    const halaman = { id: timestamp, isi: isi };
    daftarHalaman.push(halaman);
    updateDaftarHalaman();
    alert("Halaman berhasil disimpan.");
  }

  function tambahHalaman() {
    document.getElementById('diary').value = "";
    document.getElementById('assessmentResultsDiv').innerHTML = "";
    document.getElementById('hasilAssessment').style.display = 'none';
  }

  function muatHalamanTerakhir() {
    if (daftarHalaman.length === 0) {
      alert("Tidak ada halaman tersimpan.");
      return;
    }
    const halamanTerakhir = daftarHalaman[daftarHalaman.length - 1];
    document.getElementById('diary').value = halamanTerakhir.isi;
    assessDiary();
  }

  function updateDaftarHalaman() {
    const container = document.getElementById('daftarHalaman');
    container.innerHTML = "";
    daftarHalaman.forEach((halaman, index) => {
      const btn = document.createElement('button');
      btn.textContent = `Halaman ${index + 1}`;
      btn.onclick = () => {
        document.getElementById('diary').value = halaman.isi;
        assessDiary();
      };
      container.appendChild(btn);
    });
  }

  function assessDiary() {
    const isi = document.getElementById('diary').value.toLowerCase();

    const kalimat = isi.split(/[.!?]\s/).length;
    const kata = isi.split(/\s+/).length;

    let emosi = '';
    if (isi.includes('sedih') || isi.includes('kecewa') || isi.includes('gelisah') || isi.includes('tertekan')) {
      emosi = 'Emosi negatif, merasa sedih atau kecewa.';
    } else if (isi.includes('bahagia') || isi.includes('senang') || isi.includes('gembira')) {
      emosi = 'Perasaan positif dan bahagia.';
    } else if (isi.includes('stres') || isi.includes('tekanan') || isi.includes('pusing')) {
      emosi = 'Mengalami stres atau tekanan.';
    } else {
      emosi = 'Perasaan tidak terlalu jelas atau campuran.';
    }

    let tema = '';
    if (isi.includes('karier') || isi.includes('pekerjaan') || isi.includes('profesi')) {
      tema = 'Fokus pada bidang karier dan pekerjaan.';
    } else if (isi.includes('keluarga') || isi.includes('orangtua') || isi.includes('pasangan')) {
      tema = 'Fokus pada hubungan keluarga dan orang terdekat.';
    } else if (isi.includes('mimpi') || isi.includes('harapan') || isi.includes('tujuan')) {
      tema = 'Berbicara tentang mimpi dan harapan masa depan.';
    } else {
      tema = 'Cerita tentang pengalaman sehari-hari dan perasaan.';
    }

    let saran = '';
    if (kata < 50) {
      saran = 'Ceritakan lebih banyak pengalaman dan perasaan agar bisa dianalisis lebih baik.';
    } else if (kalimat < 3) {
      saran = 'Tulis lebih banyak detail tentang cerita dan perasaan.';
    } else {
      saran = 'Cerita cukup lengkap, terus kembangkan ekspresi dan refleksi diri.';
    }

    let bidangKarier = '';
    if (isi.includes('kreatif') || isi.includes('desain') || isi.includes('seni') || isi.includes('menulis')) {
      bidangKarier = 'Bidang kreatif dan seni.';
    } else if (isi.includes('teknologi') || isi.includes('programming') || isi.includes('coding')) {
      bidangKarier = 'Bidang teknologi dan pengembangan perangkat lunak.';
    } else if (isi.includes('bisnis') || isi.includes('usaha') || isi.includes('manajemen')) {
      bidangKarier = 'Bidang bisnis dan manajemen.';
    } else {
      bidangKarier = 'Cocok di berbagai bidang, tergantung minat dan kemampuan.';
    }

    let perbaikan = '';
    if (isi.includes('percaya diri') || isi.includes('motivasi')) {
      perbaikan = 'Perkuat rasa percaya diri dan motivasi diri.';
    } else {
      perbaikan = 'Perlu meningkatkan kepercayaan diri dan semangat.';
    }

    document.getElementById('assessmentResultsDiv').innerHTML = `
      <p><strong>Fase Psikologi:</strong> ${emosi}</p>
      <p><strong>Tema Utama Cerita:</strong> ${tema}</p>
      <p><strong>Saran:</strong> ${saran}</p>
      <p><strong>Bidang Karier Cocok:</strong> ${bidangKarier}</p>
      <p><strong>Perbaikan yang Disarankan:</strong> ${perbaikan}</p>
    `;
    document.getElementById('hasilAssessment').style.display = 'block';
  }

  function curhatBro() {
    const isi = document.getElementById('diary').value.trim();
    if (isi === "") {
      alert("Isi diary kosong, tidak bisa curhat.");
      return;
    }
    const timestamp = new Date().toISOString();
    const halamanCurhat = {
      id: timestamp,
      isi: isi,
      tipe: 'curhat'
    };
    daftarHalaman.push(halamanCurhat);
    updateDaftarHalaman();
    assessDiary();
    alert("Curhat kamu sudah tersimpan dan dianalisis!");
  }

  document.getElementById('diary').addEventListener('input', () => {
    assessDiary();
  });

  window.onload = () => {
    // tampilkan halaman utama setelah login
  };

  // Background gambar otomatis
  const backgroundImages = [
    'https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.1&auto=format&fit=crop&w=1600&q=80',
    'https://images.unsplash.com/photo-1470770841072-f978cf4d019e?ixlib=rb-4.0.1&auto=format&fit=crop&w=1600&q=80',
    'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.1&auto=format&fit=crop&w=1600&q=80',
    'https://images.unsplash.com/photo-1523413651479-597eb2da0ad6?ixlib=rb-4.0.1&auto=format&fit=crop&w=1600&q=80',
    'https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.1&auto=format&fit=crop&w=1600&q=80'
  ];

  let currentBgIndex = 0;

  function startBackgroundRotation() {
    setInterval(() => {
      document.body.style.backgroundImage = `url(${backgroundImages[currentBgIndex]})`;
      currentBgIndex = (currentBgIndex + 1) % backgroundImages.length;
    }, 5000); // ganti gambar setiap 5 detik
  }
</script>

</body>
</html>